<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Optimisation on Nawafのポートフォリオ</title><link>https://chowdhurynawaf.github.io/tags/optimisation/</link><description>Recent content in Optimisation on Nawafのポートフォリオ</description><generator>Hugo -- gohugo.io</generator><language>jp</language><lastBuildDate>Thu, 09 Feb 2023 08:01:47 +0600</lastBuildDate><atom:link href="https://chowdhurynawaf.github.io/tags/optimisation/index.xml" rel="self" type="application/rss+xml"/><item><title>BeedaのSwiftコンパイル時間を83％改善</title><link>https://chowdhurynawaf.github.io/posts/improving-beedas-swift-compilation-time/</link><pubDate>Thu, 09 Feb 2023 08:01:47 +0600</pubDate><guid>https://chowdhurynawaf.github.io/posts/improving-beedas-swift-compilation-time/</guid><description>&lt;h2 id="コンテキスト">コンテキスト&lt;/h2>
&lt;p>Beedaの新機能拡張に伴い、コンパイル時間が深刻な問題となってきました。些細な変更やフルコンパイルに約11分もかかるため、開発ワークフローに大幅な遅延が生じていました。&lt;/p>
&lt;p>生産性を向上させ、開発の効率を改善するために、このコンパイル時間を劇的に短縮することを目指しました。この記事では、どのようにしてコンパイル時間を2分にまで短縮したかを紹介します。&lt;/p>
&lt;h2 id="xcodeの最適化レベル">Xcodeの最適化レベル&lt;/h2>
&lt;p>Xcodeでは、以下の3つの最適化レベルから選択できます：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>なし&lt;/strong>&lt;/li>
&lt;li>&lt;strong>高速&lt;/strong>&lt;/li>
&lt;li>&lt;strong>全モジュール最適化を使用した高速&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>これらの設定を活用して、どのようにこの改善を実現したかを紹介します。&lt;/p>
&lt;p>&lt;img src="https://chowdhurynawaf.github.io/images/site/bc.jpg" alt="image info">&lt;/p>
&lt;p>「全モジュール最適化」を有効にすることで、コンパイルプロセスが大幅に加速されます。しかし、「高速」または「全モジュール最適化を使用した高速」設定を選択すると、デバッグ機能が無効になります。これらのオプションのいずれかを選択し、アプリをコンパイルした後にデバッグを試みると、コンソールに次のメッセージが表示されます：&lt;/p>
&lt;blockquote>
&lt;p>アプリは最適化されてコンパイルされました - ステッピングは異常に動作する可能性があり、変数が利用できないことがあります。&lt;/p>&lt;/blockquote>
&lt;hr>
&lt;h2 id="解決策ユーザー定義設定を追加する">解決策：ユーザー定義設定を追加する&lt;/h2>
&lt;p>全モジュール最適化を有効にするには、Xcodeプロジェクトの設定に&lt;strong>ユーザー定義設定&lt;/strong>を手動で追加する必要があります。以下はその方法です：&lt;/p>
&lt;hr>
&lt;h3 id="手順">手順&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>&lt;strong>プロジェクト設定に移動&lt;/strong>：&lt;/p>
&lt;ul>
&lt;li>プロジェクトナビゲータでプロジェクトを選択します。&lt;/li>
&lt;li>&lt;strong>ビルド設定&lt;/strong>タブに移動します。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>ユーザー定義設定を追加&lt;/strong>：&lt;/p>
&lt;h2 id="image-infoimagessiteoljpg">&lt;img src="https://chowdhurynawaf.github.io/images/site/ol.jpg" alt="image info">&lt;/h2>
&lt;p>&lt;img src="https://chowdhurynawaf.github.io/images/site/mo.jpg" alt="image info">&lt;/p>
&lt;ul>
&lt;li>ビルド設定ペインの左上隅にある**+**ボタンをクリックします。&lt;/li>
&lt;li>&lt;strong>ユーザー定義設定の追加&lt;/strong>を選択します。&lt;/li>
&lt;li>設定名を&lt;code>SWIFT_WHOLE_OPTIMIZATION_LEVEL&lt;/code>（または他の関連する名前）にします。&lt;/li>
&lt;li>値を&lt;code>YES&lt;/code>に設定して、全モジュール最適化を有効にします。&lt;/li>
&lt;/ul>
&lt;hr>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>Debug設定でNoneを設定&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>ターゲットのビルド設定で、Debug構成の最適化レベルをNoneに設定します。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;h3 id="この改善がbeedaに与える影響">この改善がBeedaに与える影響&lt;/h3>
&lt;p>コードを頻繁に更新し、反復しているiOSチームにとって、この改善は&lt;strong>効率の向上&lt;/strong>、&lt;strong>コストの削減&lt;/strong>、&lt;strong>顧客体験の向上&lt;/strong>に大きな役割を果たしています。具体的に言うと、1日30回のコンパイルを実行する場合、この最適化は&lt;strong>1日に約26時間のコンパイル時間&lt;/strong>を節約します。この時間の節約は、&lt;strong>3人の追加の開発者&lt;/strong>のアウトプットと同じくらいの効果があります。&lt;/p></description></item></channel></rss>